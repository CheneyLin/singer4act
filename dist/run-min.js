(function(){function t(t){function e(e,n,i,r,o,a){for(;o>=0&&a>o;o+=t){var s=r?r[o]:o;i=n(i,e[s],s,e)}return i}return function(n,i,r,o){i=A(i,o,4);var a=!x(n)&&y.keys(n),s=(a||n).length,c=t>0?0:s-1;return arguments.length<3&&(r=n[a?a[c]:c],c+=t),e(n,i,r,a,c,s)}}function e(t){return function(e,n,i){n=k(n,i);for(var r=$(e),o=t>0?0:r-1;o>=0&&r>o;o+=t)if(n(e[o],o,e))return o;return-1}}function n(t,e,n){return function(i,r,o){var a=0,s=$(i);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(i,r),i[o]===r?o:-1;if(r!==r)return o=e(l.call(i,a,s),y.isNaN),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&s>o;o+=t)if(i[o]===r)return o;return-1}}function i(t,e){var n=j.length,i=t.constructor,r=y.isFunction(i)&&i.prototype||s,o="constructor";for(y.has(t,o)&&!y.contains(e,o)&&e.push(o);n--;)o=j[n],o in t&&t[o]!==r[o]&&!y.contains(e,o)&&e.push(o)}var r=this,o=r._,a=Array.prototype,s=Object.prototype,c=Function.prototype,u=a.push,l=a.slice,h=s.toString,d=s.hasOwnProperty,p=Array.isArray,f=Object.keys,v=c.bind,g=Object.create,m=function(){},y=function(t){return t instanceof y?t:this instanceof y?void(this._wrapped=t):new y(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):r._=y,y.VERSION="1.8.3";var A=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return function(){return t.apply(e,arguments)}},k=function(t,e,n){return null==t?y.identity:y.isFunction(t)?A(t,e,n):y.isObject(t)?y.matcher(t):y.property(t)};y.iteratee=function(t,e){return k(t,e,1/0)};var w=function(t,e){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var r=1;i>r;r++)for(var o=arguments[r],a=t(o),s=a.length,c=0;s>c;c++){var u=a[c];e&&void 0!==n[u]||(n[u]=o[u])}return n}},b=function(t){if(!y.isObject(t))return{};if(g)return g(t);m.prototype=t;var e=new m;return m.prototype=null,e},_=function(t){return function(e){return null==e?void 0:e[t]}},T=Math.pow(2,53)-1,$=_("length"),x=function(t){var e=$(t);return"number"==typeof e&&e>=0&&T>=e};y.each=y.forEach=function(t,e,n){e=A(e,n);var i,r;if(x(t))for(i=0,r=t.length;r>i;i++)e(t[i],i,t);else{var o=y.keys(t);for(i=0,r=o.length;r>i;i++)e(t[o[i]],o[i],t)}return t},y.map=y.collect=function(t,e,n){e=k(e,n);for(var i=!x(t)&&y.keys(t),r=(i||t).length,o=Array(r),a=0;r>a;a++){var s=i?i[a]:a;o[a]=e(t[s],s,t)}return o},y.reduce=y.foldl=y.inject=t(1),y.reduceRight=y.foldr=t(-1),y.find=y.detect=function(t,e,n){var i;return i=x(t)?y.findIndex(t,e,n):y.findKey(t,e,n),void 0!==i&&-1!==i?t[i]:void 0},y.filter=y.select=function(t,e,n){var i=[];return e=k(e,n),y.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i},y.reject=function(t,e,n){return y.filter(t,y.negate(k(e)),n)},y.every=y.all=function(t,e,n){e=k(e,n);for(var i=!x(t)&&y.keys(t),r=(i||t).length,o=0;r>o;o++){var a=i?i[o]:o;if(!e(t[a],a,t))return!1}return!0},y.some=y.any=function(t,e,n){e=k(e,n);for(var i=!x(t)&&y.keys(t),r=(i||t).length,o=0;r>o;o++){var a=i?i[o]:o;if(e(t[a],a,t))return!0}return!1},y.contains=y.includes=y.include=function(t,e,n,i){return x(t)||(t=y.values(t)),("number"!=typeof n||i)&&(n=0),y.indexOf(t,e,n)>=0},y.invoke=function(t,e){var n=l.call(arguments,2),i=y.isFunction(e);return y.map(t,function(t){var r=i?e:t[e];return null==r?r:r.apply(t,n)})},y.pluck=function(t,e){return y.map(t,y.property(e))},y.where=function(t,e){return y.filter(t,y.matcher(e))},y.findWhere=function(t,e){return y.find(t,y.matcher(e))},y.max=function(t,e,n){var i,r,o=-1/0,a=-1/0;if(null==e&&null!=t){t=x(t)?t:y.values(t);for(var s=0,c=t.length;c>s;s++)i=t[s],i>o&&(o=i)}else e=k(e,n),y.each(t,function(t,n,i){r=e(t,n,i),(r>a||r===-1/0&&o===-1/0)&&(o=t,a=r)});return o},y.min=function(t,e,n){var i,r,o=1/0,a=1/0;if(null==e&&null!=t){t=x(t)?t:y.values(t);for(var s=0,c=t.length;c>s;s++)i=t[s],o>i&&(o=i)}else e=k(e,n),y.each(t,function(t,n,i){r=e(t,n,i),(a>r||1/0===r&&1/0===o)&&(o=t,a=r)});return o},y.shuffle=function(t){for(var e,n=x(t)?t:y.values(t),i=n.length,r=Array(i),o=0;i>o;o++)e=y.random(0,o),e!==o&&(r[o]=r[e]),r[e]=n[o];return r},y.sample=function(t,e,n){return null==e||n?(x(t)||(t=y.values(t)),t[y.random(t.length-1)]):y.shuffle(t).slice(0,Math.max(0,e))},y.sortBy=function(t,e,n){return e=k(e,n),y.pluck(y.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var S=function(t){return function(e,n,i){var r={};return n=k(n,i),y.each(e,function(i,o){var a=n(i,o,e);t(r,i,a)}),r}};y.groupBy=S(function(t,e,n){y.has(t,n)?t[n].push(e):t[n]=[e]}),y.indexBy=S(function(t,e,n){t[n]=e}),y.countBy=S(function(t,e,n){y.has(t,n)?t[n]++:t[n]=1}),y.toArray=function(t){return t?y.isArray(t)?l.call(t):x(t)?y.map(t,y.identity):y.values(t):[]},y.size=function(t){return null==t?0:x(t)?t.length:y.keys(t).length},y.partition=function(t,e,n){e=k(e,n);var i=[],r=[];return y.each(t,function(t,n,o){(e(t,n,o)?i:r).push(t)}),[i,r]},y.first=y.head=y.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:y.initial(t,t.length-e)},y.initial=function(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},y.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:y.rest(t,Math.max(0,t.length-e))},y.rest=y.tail=y.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},y.compact=function(t){return y.filter(t,y.identity)};var C=function(t,e,n,i){for(var r=[],o=0,a=i||0,s=$(t);s>a;a++){var c=t[a];if(x(c)&&(y.isArray(c)||y.isArguments(c))){e||(c=C(c,e,n));var u=0,l=c.length;for(r.length+=l;l>u;)r[o++]=c[u++]}else n||(r[o++]=c)}return r};y.flatten=function(t,e){return C(t,e,!1)},y.without=function(t){return y.difference(t,l.call(arguments,1))},y.uniq=y.unique=function(t,e,n,i){y.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=k(n,i));for(var r=[],o=[],a=0,s=$(t);s>a;a++){var c=t[a],u=n?n(c,a,t):c;e?(a&&o===u||r.push(c),o=u):n?y.contains(o,u)||(o.push(u),r.push(c)):y.contains(r,c)||r.push(c)}return r},y.union=function(){return y.uniq(C(arguments,!0,!0))},y.intersection=function(t){for(var e=[],n=arguments.length,i=0,r=$(t);r>i;i++){var o=t[i];if(!y.contains(e,o)){for(var a=1;n>a&&y.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},y.difference=function(t){var e=C(arguments,!0,!0,1);return y.filter(t,function(t){return!y.contains(e,t)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(t){for(var e=t&&y.max(t,$).length||0,n=Array(e),i=0;e>i;i++)n[i]=y.pluck(t,i);return n},y.object=function(t,e){for(var n={},i=0,r=$(t);r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},y.findIndex=e(1),y.findLastIndex=e(-1),y.sortedIndex=function(t,e,n,i){n=k(n,i,1);for(var r=n(e),o=0,a=$(t);a>o;){var s=Math.floor((o+a)/2);n(t[s])<r?o=s+1:a=s}return o},y.indexOf=n(1,y.findIndex,y.sortedIndex),y.lastIndexOf=n(-1,y.findLastIndex),y.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),o=0;i>o;o++,t+=n)r[o]=t;return r};var P=function(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var o=b(t.prototype),a=t.apply(o,r);return y.isObject(a)?a:o};y.bind=function(t,e){if(v&&t.bind===v)return v.apply(t,l.call(arguments,1));if(!y.isFunction(t))throw new TypeError("Bind must be called on a function");var n=l.call(arguments,2),i=function(){return P(t,i,e,this,n.concat(l.call(arguments)))};return i},y.partial=function(t){var e=l.call(arguments,1),n=function(){for(var i=0,r=e.length,o=Array(r),a=0;r>a;a++)o[a]=e[a]===y?arguments[i++]:e[a];for(;i<arguments.length;)o.push(arguments[i++]);return P(t,n,this,this,o)};return n},y.bindAll=function(t){var e,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(e=1;i>e;e++)n=arguments[e],t[n]=y.bind(t[n],t);return t},y.memoize=function(t,e){var n=function(i){var r=n.cache,o=""+(e?e.apply(this,arguments):i);return y.has(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return n.cache={},n},y.delay=function(t,e){var n=l.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},y.defer=y.partial(y.delay,y,1),y.throttle=function(t,e,n){var i,r,o,a=null,s=0;n||(n={});var c=function(){s=n.leading===!1?0:y.now(),a=null,o=t.apply(i,r),a||(i=r=null)};return function(){var u=y.now();s||n.leading!==!1||(s=u);var l=e-(u-s);return i=this,r=arguments,0>=l||l>e?(a&&(clearTimeout(a),a=null),s=u,o=t.apply(i,r),a||(i=r=null)):a||n.trailing===!1||(a=setTimeout(c,l)),o}},y.debounce=function(t,e,n){var i,r,o,a,s,c=function(){var u=y.now()-a;e>u&&u>=0?i=setTimeout(c,e-u):(i=null,n||(s=t.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,a=y.now();var u=n&&!i;return i||(i=setTimeout(c,e)),u&&(s=t.apply(o,r),o=r=null),s}},y.wrap=function(t,e){return y.partial(e,t)},y.negate=function(t){return function(){return!t.apply(this,arguments)}},y.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},y.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},y.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},y.once=y.partial(y.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),j=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(t){if(!y.isObject(t))return[];if(f)return f(t);var e=[];for(var n in t)y.has(t,n)&&e.push(n);return D&&i(t,e),e},y.allKeys=function(t){if(!y.isObject(t))return[];var e=[];for(var n in t)e.push(n);return D&&i(t,e),e},y.values=function(t){for(var e=y.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},y.mapObject=function(t,e,n){e=k(e,n);for(var i,r=y.keys(t),o=r.length,a={},s=0;o>s;s++)i=r[s],a[i]=e(t[i],i,t);return a},y.pairs=function(t){for(var e=y.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},y.invert=function(t){for(var e={},n=y.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},y.functions=y.methods=function(t){var e=[];for(var n in t)y.isFunction(t[n])&&e.push(n);return e.sort()},y.extend=w(y.allKeys),y.extendOwn=y.assign=w(y.keys),y.findKey=function(t,e,n){e=k(e,n);for(var i,r=y.keys(t),o=0,a=r.length;a>o;o++)if(i=r[o],e(t[i],i,t))return i},y.pick=function(t,e,n){var i,r,o={},a=t;if(null==a)return o;y.isFunction(e)?(r=y.allKeys(a),i=A(e,n)):(r=C(arguments,!1,!1,1),i=function(t,e,n){return e in n},a=Object(a));for(var s=0,c=r.length;c>s;s++){var u=r[s],l=a[u];i(l,u,a)&&(o[u]=l)}return o},y.omit=function(t,e,n){if(y.isFunction(e))e=y.negate(e);else{var i=y.map(C(arguments,!1,!1,1),String);e=function(t,e){return!y.contains(i,e)}}return y.pick(t,e,n)},y.defaults=w(y.allKeys,!0),y.create=function(t,e){var n=b(t);return e&&y.extendOwn(n,e),n},y.clone=function(t){return y.isObject(t)?y.isArray(t)?t.slice():y.extend({},t):t},y.tap=function(t,e){return e(t),t},y.isMatch=function(t,e){var n=y.keys(e),i=n.length;if(null==t)return!i;for(var r=Object(t),o=0;i>o;o++){var a=n[o];if(e[a]!==r[a]||!(a in r))return!1}return!0};var E=function(t,e,n,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof y&&(t=t._wrapped),e instanceof y&&(e=e._wrapped);var r=h.call(t);if(r!==h.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===r;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(y.isFunction(a)&&a instanceof a&&y.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],i=i||[];for(var c=n.length;c--;)if(n[c]===t)return i[c]===e;if(n.push(t),i.push(e),o){if(c=t.length,c!==e.length)return!1;for(;c--;)if(!E(t[c],e[c],n,i))return!1}else{var u,l=y.keys(t);if(c=l.length,y.keys(e).length!==c)return!1;for(;c--;)if(u=l[c],!y.has(e,u)||!E(t[u],e[u],n,i))return!1}return n.pop(),i.pop(),!0};y.isEqual=function(t,e){return E(t,e)},y.isEmpty=function(t){return null==t?!0:x(t)&&(y.isArray(t)||y.isString(t)||y.isArguments(t))?0===t.length:0===y.keys(t).length},y.isElement=function(t){return!(!t||1!==t.nodeType)},y.isArray=p||function(t){return"[object Array]"===h.call(t)},y.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){y["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),y.isArguments(arguments)||(y.isArguments=function(t){return y.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(t){return"function"==typeof t||!1}),y.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},y.isNaN=function(t){return y.isNumber(t)&&t!==+t},y.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===h.call(t)},y.isNull=function(t){return null===t},y.isUndefined=function(t){return void 0===t},y.has=function(t,e){return null!=t&&d.call(t,e)},y.noConflict=function(){return r._=o,this},y.identity=function(t){return t},y.constant=function(t){return function(){return t}},y.noop=function(){},y.property=_,y.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},y.matcher=y.matches=function(t){return t=y.extendOwn({},t),function(e){return y.isMatch(e,t)}},y.times=function(t,e,n){var i=Array(Math.max(0,t));e=A(e,n,1);for(var r=0;t>r;r++)i[r]=e(r);return i},y.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},y.now=Date.now||function(){return(new Date).getTime()};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=y.invert(I),O=function(t){var e=function(e){return t[e]},n="(?:"+y.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};y.escape=O(I),y.unescape=O(L),y.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),y.isFunction(i)?i.call(t):i};var M=0;y.uniqueId=function(t){var e=++M+"";return t?t+e:e},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,B=function(t){return"\\"+U[t]};y.template=function(t,e,n){!e&&n&&(e=n),e=y.defaults({},e,y.templateSettings);var i=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(i,function(e,n,i,a,s){return o+=t.slice(r,s).replace(N,B),r=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(s){throw s.source=o,s}var c=function(t){return a.call(this,t,y)},u=e.variable||"obj";return c.source="function("+u+"){\n"+o+"}",c},y.chain=function(t){var e=y(t);return e._chain=!0,e};var R=function(t,e){return t._chain?y(e).chain():e};y.mixin=function(t){y.each(y.functions(t),function(e){var n=y[e]=t[e];y.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),R(this,n.apply(y,t))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=a[t];y.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],R(this,n)}}),y.each(["concat","join","slice"],function(t){var e=a[t];y.prototype[t]=function(){return R(this,e.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}).call(this),function(){"use strict";function t(e,i){function r(t,e){return function(){return t.apply(e,arguments)}}var o;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=e,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!t.notNeeded(e)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,c=0,u=a.length;u>c;c++)s[a[c]]=r(s[a[c]],s);n&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var r=Node.prototype.removeEventListener;"click"===t?r.call(e,t,n.hijacked||n,i):r.call(e,t,n,i)},e.addEventListener=function(t,n,i){var r=Node.prototype.addEventListener;"click"===t?r.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):r.call(e,t,n,i)}),"function"==typeof e.onclick&&(o=e.onclick,e.addEventListener("click",function(t){o(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!e,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,r=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=i&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(i&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return n&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;i&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,o;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],i){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,a,s,c,u,l=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(u=t.changedTouches[0],l=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),s=l.tagName.toLowerCase(),"label"===s){if(e=this.findControl(l)){if(this.focus(l),n)return!1;l=e}}else if(this.needsFocus(l))return t.timeStamp-a>100||i&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,t),i&&"select"===s||(this.targetElement=null,t.preventDefault()),!1);return i&&!r&&(c=l.fastClickScrollParent,c&&c.fastClickLastScrollTop!==c.scrollTop)?!0:(this.needsClick(l)||(t.preventDefault(),this.sendClick(l,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;n&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,i,r,o;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],o>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction?!0:!1)},t.attach=function(e,n){return new t(e,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}(),function(){var t=window.navigator.userAgent.toLowerCase(),e={isQQBrowser:/qqbrowser/.test(t),isWeixin:/micromessenger/.test(t)||/weixin/.test(t),isAndroid:/android/.test(t),isIOS:/iphone/.test(t)||/ipad/.test(t)||/itouch/.test(t)||/ipod/.test(t),isFirefox:/firefox/.test(t),isIpad:/ipad/.test(t),isImgotv:/imgo/.test(t)};window.UA=e}(),function(){var t={setCookie:function(t,e,n){var i=n||30,r=new Date;r.setTime(r.getTime()+24*i*60*60*1e3),document.cookie=t+"="+escape(e)+"; expires="+r.toGMTString()},getCookie:function(t){var e,n=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(n))?unescape(e[2]):null},clearCookie:function(){var t=document.cookie.match(/[^ =;]+(?=\=)/g);if(t)for(var e=t.length;e--;)document.cookie=t[e]+"=0;expires="+new Date(0).toUTCString()},parseQuery:function(t){var t=t?t:location.search,e=new Object;if(-1!=t.indexOf("?"))for(var n=t.substr(1),i=n.split("&"),r=0;r<i.length;r++)try{e[i[r].split("=")[0]]=decodeURI(i[r].split("=")[1])}catch(o){e[i[r].split("=")[0]]=unescape(i[r].split("=")[1])}return e},rnd:function(t,e){return Math.floor((e-t)*Math.random()+t)},toParam:function(t){var e=[];for(var n in t)e.push(n+"="+t[n]);return e.join("&")},showToast:function(t,e){$(".mg-toast").show();var n=$(".mg-toast p");n.removeClass("s h").html(t).show(),setTimeout(function(){n.addClass("s")},1),n.on("webkitTransitionEnd",function(){setTimeout(function(){n.addClass("h")},1500)}),setTimeout(function(){$(".mg-toast").hide(),"function"==typeof e&&e()},3e3)},getByteLength:function(t){return(t+"").replace(/[^\x00-\xff]/g,"mm").length},showLoading:function(){$(".mg-loading").show()},hideLoading:function(){$(".mg-loading").hide()},downloadApp:function(){var t={android:"http://www.hunantv.com/v/m/v/2015/mandroid/",weixin:"http://a.app.qq.com/o/simple.jsp?pkgname=com.hunantv.imgo.activity",ios:"https://itunes.apple.com/cn/app/id629774477?pt=355474&ct=mgtv&mt=8"};UA.isWeixin?window.location.href=t.weixin:window.location.href=UA.isIOS?t.ios:t.android},checkAppVersion:function(){var t=window.navigator.userAgent.toLowerCase();if(UA.isIOS){var e=t.split("imgotv-iphone/"),n=e[1].split(".");if(""+n[0]+n[1]+n[2]>453)return!0}if(UA.isAndroid){var e=t.split("imgotv-aphone/"),n=e[1].split(".");if(""+n[0]+n[1]+n[2]>451)return!0}},wxReady:function(){wx.onMenuShareAppMessage({title:ShareData.title,desc:ShareData.desc,link:ShareData.link,imgUrl:ShareData.imgUrl,type:ShareData.type,success:function(){}}),wx.onMenuShareTimeline({title:ShareData.title2,link:ShareData.link,imgUrl:ShareData.imgUrl,type:ShareData.type,success:function(){}})},wxShare:function(){var e=location.href.split("#")[0];e=escape(e);var n="http://v.api.hunantv.com/weixin/sign?url="+e+"&callback=?";$.getJSON(n,function(t){var e=t.data;wx.config({appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]})}),wx.ready(function(){t.wxReady()})},parseUrl:function(){var t=window.navigator.userAgent.toLowerCase();-1!=t.indexOf("imgo")&&$("a").each(function(t,e){var n=$(e).attr("href");if(-1!=n.indexOf("hunantv.com")){var i=n.match(/\/\w{1}\/\d{1}\/\d{1,}\/\w{1}\/(.*)\.html/i);if(!i)return;$(e).attr("href","imgotv://player?videoId="+i[1])}})},jumpPage:function(t){ImgotvApi.jumpPage({url:t})}};window.Utils=t}(),function(){var t={url:"http://singer.api.hunantv.com",get:function(t,e,n){$.ajax({url:t,data:e,dataType:"jsonp",success:function(e){console.log(t,e),(200==e.code||200==e.err_code||400==e.code||403==e.code||"ok"==e.status)&&n(e)}.bind(this),error:function(t,e,n){Utils.showToast("网络异常，请刷新重试！")},timeout:5e3})},get2:function(t,e,n,i){$.ajax({url:t,data:e,dataType:"jsonp",success:function(e){console.log(t,e),"function"==typeof n&&n(e)}.bind(this),error:function(e,n,r){Utils.showToast("网络异常，请刷新重试！"),console.log(t),"function"==typeof i&&i()},timeout:5e3})},getTermList:function(t,e){this.get(this.url+"/term/list",t,e)},getTermLike:function(t,e){this.get(this.url+"/term/like",t,e)},getTermUnlike:function(t,e){this.get(this.url+"/term/unlike",t,e)},getStarDetail:function(t,e){this.get(this.url+"/star/detail",t,e)},bookStar:function(t,e){this.get(this.url+"/star/book",t,e)},isBandPhone:function(t,e){this.get(this.url+"/star/isBand",t,e)},bandPhone:function(t,e){this.get(this.url+"/star/band",t,e)},getSpaceStar:function(t,e,n){this.get2(this.url+"/space/star",t,e,n)},getSpaceStarList:function(t,e){this.get2(this.url+"/space/space_star",t,e)},getSpaceTop:function(t,e){this.get2(this.url+"/space/top",t,e)},spaceVote:function(t,e){this.get2("http://singer.vote.hunantv.com/vote.php",t,e)},getVideo:function(t,e){this.get2("http://m.api.hunantv.com/video/getbyid",{videoId:t.videoId},e)},getSeat:function(t){this.get2(this.url+"/eight/seat",{},t)},getLiveList:function(t){this.get2(this.url+"/eight/live_list",{},t)},getPKStar:function(t,e){this.get2(this.url+"/pk/star",t,e)},getPKList:function(t){this.get2(this.url+"/pk/list",{},t)},getFenbei:function(t,e,n){this.get2(this.url+"/pk/grab",t,e,n)},voteFenbei:function(t,e){this.get2("http://singer.vote.hunantv.com/pk_vote.php",t,e)},getTopEight:function(t,e){this.get2(this.url+"/eight/top",{},t,e)},getStarEight:function(t,e,n){this.get2(this.url+"/eight/star",t,e,n)},voteEight:function(t,e,n){this.get2("http://singer.api.hunantv.com/eight_vote.php",t,e,n)},getEightSeat:function(t,e){this.get2(this.url+"/eight/live_list",{},t,e)},getFinalStarList:function(t,e,n){this.get2(this.url+"/finals/star",t,e,n)},getFinalStarTop:function(t,e){this.get2(this.url+"/finals/top",{},t,e)},getFinalGrab:function(t,e,n){this.get2(this.url+"/finals/grab",t,e,n)},voteFinal:function(t,e,n){this.get2(this.url+"/finals_vote.php",t,e,n)}};window.Api=t}(),document.addEventListener("DOMContentLoaded",function(){FastClick.attach(document.body)},!1),function(){var t,e="",n="",i=[],r=!1,o=$(window).height(),a=0,s={init:function(){if(UA.isImgotv&&!Utils.checkAppVersion())return void(window.location.href="http://www.hunantv.com/v/m/v/2015/mupdate/?from=wsgstg");var t=Utils.parseQuery();t&&(r="1"===t.h),r||(a=$(window).width()/16*9,o-=a,$(".app-nav ul li.quit").hide());ImgotvApi.getDeviceInfo(function(t){t&&(e=JSON.parse(t))}),ImgotvApi.getUserInfo(function(t){t&&(n=JSON.parse(t))}),this.getTermList(),this.bindEvents()},goAlert:function(t){var e=this;clearTimeout(e.alertTimeout),$(".mg-toast p").html(t),$(".mg-toast").fadeIn(),e.alertTimeout=setTimeout("$('.mg-toast').fadeOut();",2e3)},goCheckLogin:function(){var t=this;return n?!0:(r?ImgotvApi.login(function(t){window.location.reload()}):t.goAlert("请先登录芒果TV客户端"),!1)},render:function(){if($(".star-name").html(PDATA.person_info.name),$(".star-info").html(PDATA.person_info.info),UA.isImgotv){var t='<div class="thumbnail">                                     <img src="'+PDATA.person_info.img+'" alt="">                             </div>';$(".video").html(t)}else if(0==PDATA.person_info.vid){var t='<div class="thumbnail">                                     <img src="'+PDATA.person_info.img+'" alt="">                             </div>';$(".video").html(t)}else this.getVideo();var t="";PDATA.live_pics=PDATA.live_pics.reverse();for(var e=0;PDATA.live_pics[e];e++)t+='<div class="swiper-slide">                             <div class="bd">                                 <a href="imgotv://player?videoId='+PDATA.live_pics[e].vid+'">                                     <img src="'+PDATA.live_pics[e].img+'" alt="">                                     <img class="icon-play" src="http://i5.hunantv.com/s1/2015/mwsgssltg//images/icon-play.png" alt="">                                     <div class="title">'+PDATA.live_pics[e].title+"</div>                                 </a>                             </div>                         </div>";$(".js-zbhg-list").html(t),0==PDATA.live_pics.length&&$(".zbhg, .grfb").addClass("hide");var t="";PDATA.live_tgcc=PDATA.live_tgcc.reverse();for(var e=0;4>e&&PDATA.live_tgcc[e];e++)t+='<li>                             <a href="imgotv://player?videoId='+PDATA.live_tgcc[e].vid+'">                                 <div class="pic" style="background: url('+PDATA.live_tgcc[e].img+') no-repeat; background-size: 100% 100%;">                                     <img class="hidden" src="http://i5.hunantv.com/s1/2015/mwsgssltg/images/default-normal.png" alt="">                                 </div>                                 <div class="title">                                     <p>'+PDATA.live_tgcc[e].title+"</p>                                 </div>                             </a>                         </li>";
$(".js-tgccz-list").html(t),0==PDATA.live_tgcc.length&&$(".live-tgcc").addClass("hide");var t="";PDATA.live_gsdrc=PDATA.live_gsdrc.reverse();for(var e=0;4>e&&PDATA.live_gsdrc[e];e++)t+='<li>                             <a href="imgotv://player?videoId='+PDATA.live_gsdrc[e].vid+'">                                 <div class="pic" style="background: url('+PDATA.live_gsdrc[e].img+') no-repeat; background-size: 100% 100%;">                                     <img class="hidden" src="http://i5.hunantv.com/s1/2015/mwsgssltg/images/default-normal.png" alt="">                                 </div>                                 <div class="title">                                     <p>'+PDATA.live_gsdrc[e].title+"</p>                                 </div>                             </a>                         </li>";$(".js-gsdrc-list").html(t),0==PDATA.live_gsdrc.length&&$(".live-gsdrc").addClass("hide");var t="";PDATA.live_show=PDATA.live_show.reverse();for(var e=0;4>e&&PDATA.live_show[e];e++)t+='<li>                             <a href="imgotv://player?videoId='+PDATA.live_show[e].vid+'">                                 <div class="pic" style="background: url('+PDATA.live_show[e].img+') no-repeat; background-size: 100% 100%;">                                     <img class="hidden" src="http://i5.hunantv.com/s1/2015/mwsgssltg/images/default-normal.png" alt="">                                 </div>                                 <div class="title">                                     <p>'+PDATA.live_show[e].title+"</p>                                 </div>                             </a>                         </li>";$(".js-liveshow-list").html(t),0==PDATA.live_show.length&&$(".live-show").addClass("hide");var t="";PDATA.live_video=PDATA.live_video.reverse();for(var e=0;4>e&&PDATA.live_video[e];e++)t+='<li>                             <a href="imgotv://player?videoId='+PDATA.live_video[e].vid+'">                                 <div class="pic" style="background: url('+PDATA.live_video[e].img+') no-repeat; background-size: 100% 100%;">                                     <img class="hidden" src="http://i5.hunantv.com/s1/2015/mwsgssltg/images/default-normal.png" alt="">                                 </div>                                 <div class="title">                                     <p>'+PDATA.live_video[e].title+"</p>                                 </div>                             </a>                         </li>";$(".js-jxsp-list").html(t),0==PDATA.live_video.length&&$(".jxsp").addClass("hide");var t="";PDATA.live_music=PDATA.live_music.reverse();for(var e=0;4>e&&PDATA.live_music[e];e++)t+='<li>                             <a href="imgotv://player?videoId='+PDATA.live_music[e].vid+'">                                 <div class="pic" style="background: url('+PDATA.live_music[e].img+') no-repeat; background-size: 100% 100%;">                                     <img class="hidden" src="http://i5.hunantv.com/s1/2015/mwsgssltg/images/default-normal.png" alt="">                                 </div>                                 <div class="title">                                     <p>'+PDATA.live_music[e].title+"</p>                                 </div>                             </a>                         </li>";$(".js-live-music-list").html(t),0==PDATA.live_music.length&&$(".tdyy").addClass("hide");var t="";PDATA.live_tlxgs=PDATA.live_tlxgs.reverse();for(var e=0;4>e&&PDATA.live_tlxgs[e];e++)t+='<li>                             <a href="imgotv://player?videoId='+PDATA.live_tlxgs[e].vid+'">                                 <div class="pic" style="background: url('+PDATA.live_tlxgs[e].img+') no-repeat; background-size: 100% 100%;">                                     <img class="hidden" src="http://i5.hunantv.com/s1/2015/mwsgssltg/images/default-normal.png" alt="">                                 </div>                                 <div class="title">                                     <p>'+PDATA.live_tlxgs[e].title+"</p>                                 </div>                             </a>                         </li>";$(".js-tlgs-list").html(t),0==PDATA.live_tlxgs.length&&$(".tlxgs").addClass("hide");for(var t="",e=0;PDATA.live_photo[e];e++)t+='<li>                             <div data-pid="'+(e+1)+'" class="pic">                                 <img src="'+PDATA.live_photo[e].img1+'" alt="">                             </div>                         </li>';$(".js-live-photo1").html(t),0==PDATA.live_photo.length&&$(".tdtp").addClass("hide");for(var t="",e=0;PDATA.live_photo[e];e++)t+='<div class="swiper-slide">                             <img src="'+PDATA.live_photo[e].img2+'" alt="">                         </div>';$(".js-live-photo2").html(t)},initSlider:function(){PDATA.live_pics.length<=1||new Swiper(".zbhg-swiper-container",{autoplay:4e3,pagination:".zbhg-swiper-container .swiper-pagination",loop:!0})},getStarDetail:function(){setTimeout(function(){7==STARID?ImgotvApi.showShareMenus({title:"《我是歌手》终极踢馆歌手金志文个人小站",shareUrl:"http://i5.hunantv.com/s1/2015/mwsgssltg/share.html?star_id="+STARID,shareIcon:PDATA.person_info.img}):ImgotvApi.showShareMenus({title:"《我是歌手 谁来踢馆》"+PDATA.person_info.name+"的个人小站-芒果tv",shareUrl:"http://i5.hunantv.com/s1/2015/mwsgssltg/share.html?star_id="+STARID,shareIcon:PDATA.person_info.img})},2e3)},isBandPhone:function(){Api.isBandPhone({ticket:n.ticket,uuid:n.uuid},function(t){n.is_band=t.data.status})},getVideo:function(){Api.get("http://m.api.hunantv.com/video/getbyid/",{videoId:PDATA.person_info.vid},function(t){var e=t.data,n=!!document.createElement("video").canPlayType("application/x-mpegURL"),i=n?e.m3u8Url[1]?e.m3u8Url[1]:e.m3u8Url[0]:e.mp4Url[1]?e.mp4Url[1]:e.mp4Url[0];Api.get(i,{},function(t){var n='<video id="mgo-player" preload="auto" controls="controls" width="100%" height="100%" poster="'+e.detail.image+'" src="'+t.info+'" webkit-playsinline></video>';$(".video").html(n)})})},setIntroHeight:function(){setTimeout(function(){var t=$(".js-singer-info").height();t>40&&($(".js-singer-info").css("display","-webkit-box"),$(".js-btn-expand").removeClass("hidden"))},300)},showPopupBindPhone:function(){var e=$(".js-popup-yycg");e.find(".ret2 span").html(t.number),e.removeClass("hide")},showPopupSubmitSucc:function(){$(".js-popup-yycg").addClass("hide"),$(".js-popup-tjcg").removeClass("hide")},bindEvents:function(){var e=this;$(".vote-nav img").on("click",function(t){$(".page-vote").fadeOut()}),$(".app-nav ul li.quit").on("click",function(t){ImgotvApi.closeWebView()}),$(".mg-share").on("click",function(){$(".mg-share").hide()}),$(".main-content-share img").on("click",function(t){r?ImgotvApi.showShareMenus({title:ShareData.title,shareUrl:ShareData.link,shareIcon:ShareData.imgUrl}):$(".mg-share").show()}),$(".js-popup-yycg").on("click",".btn-close",function(){$(".js-popup-yycg").addClass("hide")}),$(".js-popup-tjcg").on("click",".btn-close",function(){$(".js-popup-tjcg").addClass("hide")}),$(".js-popup-yycg").on("click",".btn-tj",function(){var i=$(".phone").val();return i?11!=i.length?void Utils.showToast("手机号码格式不对！"):void Api.bandPhone({ticket:n.ticket,uuid:n.uuid,mobile:i,star_id:t.star_id},function(t){n.is_band=1,e.showPopupSubmitSucc(),$(".js-btn-yyt").addClass("btn-yyy").removeClass("btn-yyt").html("已预约"),_czc.push(["_trackEvent","提交次数","ok"])}):void Utils.showToast("手机号码不能为空！")}),$(".js-popup-tjcg").on("click",".btn-fx",function(){$(".mg-share").show()}),$(".mg-share").on("click",function(){$(".mg-share").hide()}),$(".word").on("focus",function(){return n?void 0:(console.log("未登录"),void ImgotvApi.login(function(t){window.location.reload()}))}),$(".js-btn-yyt").on("click",function(){if(!$(this).hasClass("btn-yyy")){if(!n)return console.log("未登录"),void ImgotvApi.login(function(t){window.location.reload()});Api.bookStar({ticket:n.ticket,uuid:n.uuid,star_id:STARID},function(){$(".js-btn-yyt").addClass("btn-yyy").removeClass("btn-yyt").html("已预约"),ImgotvApi.showShareMenus({title:"大家好，我是"+t.name+"，我正在参加《我是歌手，谁来踢馆》挑战赛，赶紧来预约我的live show吧 - 芒果TV",shareUrl:"http://i5.hunantv.com/s1/2015/mwsgssltg/yuyue.html?star_id="+t.star_id,shareIcon:t.pc_avatar_key})}),n.is_band||e.showPopupBindPhone()}}),$(".js-tdtp").on("click",".pic",function(){var t=$(this).data("pid");$(".js-tdtpd").removeClass("hide");var e=new Swiper(".tdtpd-swiper-container",{preventLinksPropagation:!1,pagination:".tdtpd-swiper-container .swiper-pagination",autoplay:4e3,loop:!0});e.slideTo(t)}),$(".js-tdtpd").on("click",function(){$(".js-tdtpd").addClass("hide")}),$(".js-btn-expand").on("click",function(){$(this).toggleClass("active");var t=$(this).hasClass("active");t?($(this).find("span").html("缩起"),$(".js-singer-info").attr("style","")):($(this).find("span").html("展开"),$(".js-singer-info").css("display","-webkit-box"))}),$(".js-btn-load-comment").on("click",function(){pageCount++,e.getComments()}),$(".js-btn-add-comment").on("click",function(){e.addComment()}),$(".js-comment-list").on("click",".like",function(t){if(!n)return console.log("未登录"),void ImgotvApi.login(function(t){window.location.reload()});var e=t.target.tagName.toLowerCase(),i="span"==e||"img"==e||"i"==e?$(t.target).parent(".like"):$(t.target);i.data("cid");i.hasClass("locked")})},loadAvatars:function(){$(".js-comment-list .avatar img").each(function(t,e){var n=new Image;n.src=$(e).attr("src"),n.onload=function(){},n.onerror=function(){$(e).attr("src","http://i5.hunantv.com/s1/2015/qmjs/images/default-avatar.png")}})},getTermList:function(){var t=this;Api.getTermList({ticket:n.ticket,uuid:n.uuid},function(e){i=e.data.list,console.log(e.data.list),t.appRender(),t.appBind()})},appRender:function(){setTimeout("$('.page-loading').fadeOut();",1e3),$(".page-app").css("margin-top",a+"px"),$(".page-vote").css("margin-top",a+"px"),$(".main-menu").height(o-$(".nav").height());for(var t=0;t<i.length;t++)$(".main-menu ul").append("<li><h1>"+(t+1)+"</h1><h2>期</h2></li>");$(".main-menu ul li:last-child").addClass("active"),$(".main-menu").scrollTop($(".main-menu").height()),$(".main-content").width($(window).width()-$(".main-menu").width()),$(".main-content").height(o-$(".nav").height());for(var t=0;t<i.length;t++){var e="",n=i[t],r=10;if(t==i.length-1){for(var s=0;s<n.length;s++)parseFloat(n[s].like_star_number)>r&&(r=parseFloat(n[s].like_star_number)+1);e='<li><h1>谁是本周第一名？</h1><div class="content-list1 clearfix" style="height:'+($(".main-content").height()-80)+'px;"><ul>';for(var s=0;s<n.length;s++)e+='<li class="content-voteli clearfix" data-sortvalue="'+n[s].like_star_number+'" data-index="'+t+'" data-index2="'+s+'">',e+='<img class="avatar" src="'+n[s].pc_avatar_key+'">',e+="<h1>"+n[s].name+"</h1>",e+='<h2><img class="icon" src="assets/images/icon_uncheck.png">'+n[s].like_star_number+"</h2>",e+='<h3><div class="barbg"></div>',e+='<div class="barshow" style="width:'+Math.floor(parseFloat(n[s].like_star_number)/r*80)+'%"></div></h3>',e+="</li>";e+="</ul></div></li>"}else{for(var s=0;s<n.length;s++)parseFloat(n[s].like_music_number)>r&&(r=parseFloat(n[s].like_music_number)+1);e='<li class="content-term content-term-'+t+'"><h2 class="active" data-index="'+t+'">网友人气榜</h2><h3 data-index="'+t+'">本轮竞演排名</h3>',e+='<div class="content-list1 clearfix" style="height:'+($(".main-content").height()-80)+'px;"><ul>';for(var s=0;s<n.length;s++)e+='<li class="content-voteli clearfix" data-sortvalue="'+n[s].like_music_number+'" data-index="'+t+'" data-index2="'+s+'">',e+='<img class="avatar" src="'+n[s].pc_avatar_key+'">',e+="<h1>"+n[s].name+'<img class="icon"  src="assets/images/icon_song.png">'+n[s].music+"</h1>",e+='<h2><img class="icon"  src="assets/images/icon_uncheck.png">'+n[s].like_music_number+"</h2>",e+='<h3><div class="barbg"></div><div class="barshow" style="width:'+Math.floor(parseFloat(n[s].like_music_number)/r*80)+'%"></div></h3>',e+="</li>";e+="</ul></div>",e+='<div class="content-list2 clearfix" style="height:'+($(".main-content").height()-80)+'px;display:none;"><ul>';for(var s=0;s<n.length;s++)e+='<li class="-cancel-content-voteli clearfix" data-rank="'+n[s].rank+'">',e+='<img class="avatar" src="'+n[s].pc_avatar_key+'">',e+="<h1>"+n[s].name+"</h1>",e+="</li>";e+="</ul></div>",e+="</li>"}$(".main-content>ul").append(e)}$(".main-content>ul>li:last-child").show(),$(".vote-main").height(o-$(".nav").height())},appBind:function(){var t=this;$(".main-menu ul li").on("click","",function(){var t=$(this).index();$(".main-menu ul li").removeClass("active"),$(".main-menu ul li:nth-child("+(t+1)+")").addClass("active"),$(".main-content>ul>li").hide(),$(".main-content>ul>li:nth-child("+(t+1)+")").show()}),$(".main-content li").on("click",".content-voteli",function(){var e=$(this).data("index"),n=$(this).data("index2"),r=i[e][n];t.showVotePage(r)}),$(".content-term").on("click","h2",function(){var t=$(this).data("index");$(".content-term-"+t+" h2").addClass("active"),$(".content-term-"+t+" h3").removeClass("active"),$(".content-term-"+t+" .content-list1").show(),$(".content-term-"+t+" .content-list2").hide()}),$(".content-term").on("click","h3",function(){var t=$(this).data("index");$(".content-term-"+t+" h3").addClass("active"),$(".content-term-"+t+" h2").removeClass("active"),$(".content-term-"+t+" .content-list2").show(),$(".content-term-"+t+" .content-list1").hide()})},showVotePage:function(t){var e=this;if(0==t.is_end){var i="";i+="<h1>"+t.name+"</h1>",i+='<img class="avatar" src="'+t.pc_avatar_key+'">',i+='<h2><img class="icon"  src="assets/images/icon_uncheck.png"><span>'+t.like_star_number+"</span></h2>",i+='<h3><div><img class="btnvote1" src="assets/images/btn_vote1.png"></div><div><img class="btnvote2" src="assets/images/btn_vote2.png"></div></h3>',$(".vote-main").html(i),$(".page-vote").show(),$(".btnvote1").on("click","",function(){$(this).addClass("active"),e.goCheckLogin()&&Api.getTermLike({term_id:t.term_id,ticket:n.ticket,uuid:n.uuid},function(t){400==t.code?e.goAlert("请不要重复投票"):($(".vote-main h2 span").html(parseFloat($(".vote-main h2 span").html())+1),e.goAlert("操作成功"))})}),$(".btnvote2").on("click","",function(){$(this).addClass("active"),setTimeout("$('.page-vote').hide();",500)})}else{var i="";i+="<h1>"+t.name+"</h1>",i+='<h2><img class="icon"  src="assets/images/icon_song.png">'+t.music+"</h2>",i+='<img class="avatar" src="'+t.pc_avatar_key+'">',i+='<h4><div><img class="btnvote1" src="assets/images/btn_vote1.png"><span>'+t.like_music_number+'</span></div><div><img class="btnvote3" src="assets/images/btn_vote3.png"><span>'+t.unlike_music_number+"</span></div></h4>",$(".vote-main").html(i),$(".page-vote").show(),$(".btnvote1").on("click","",function(){$(this).addClass("active"),e.goCheckLogin()&&Api.getTermLike({term_id:t.term_id,ticket:n.ticket,uuid:n.uuid},function(t){400==t.code?e.goAlert("请不要重复投票"):($(".vote-main h4 div:first-child span").html(parseFloat($(".vote-main h4 div:first-child span").html())+1),e.goAlert("操作成功"))})}),$(".btnvote3").on("click","",function(){$(this).addClass("active"),e.goCheckLogin()&&Api.getTermUnlike({term_id:t.term_id,ticket:n.ticket,uuid:n.uuid},function(t){400==t.code?e.goAlert("请不要重复投票"):($(".vote-main h4 div:last-child span").html(parseFloat($(".vote-main h4 div:last-child span").html())+1),e.goAlert("操作成功"))})})}},end:function(){}};s.init()}();