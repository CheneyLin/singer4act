!function(t,e){"use strict";function n(){return e}"function"==typeof define&&define.amd?define("tinysort",n):t.tinysort=e}(this,function(){"use strict";function t(t,r){function c(){0===arguments.length?v({}):e(arguments,function(t){v($(t)?{selector:t}:t)}),d=j.length}function v(t){var e=!!t.selector,r=e&&":"===t.selector[0],i=n(t||{},m);j.push(n({hasSelector:e,hasAttr:!(i.attr===o||""===i.attr),hasData:i.data!==o,hasFilter:r,sortReturnNumber:"asc"===i.order?1:-1},i))}function g(){e(t,function(t,e){A?A!==t.parentNode&&(L=!1):A=t.parentNode;var n=j[0],r=n.hasFilter,i=n.selector,a=!i||r&&t.matchesSelector(i)||i&&t.querySelector(i),o=a?M:O,c={elm:t,pos:e,posn:o.length};T.push(c),o.push(c)}),S=M.slice(0)}function y(){M.sort(k)}function k(t,n){var r=0;for(0!==p&&(p=0);0===r&&d>p;){var o=j[p],c=o.ignoreDashes?h:l;if(e(f,function(t){var e=t.prepare;e&&e(o)}),o.sortFunction)r=o.sortFunction(t,n);else if("rand"==o.order)r=Math.random()<.5?1:-1;else{var s=a,m=C(t,o),v=C(n,o),g=""===m||m===i,y=""===v||v===i;if(m===v)r=0;else if(o.emptyEnd&&(g||y))r=g&&y?0:g?1:-1;else{if(!o.forceStrings){var k=$(m)?m&&m.match(c):a,w=$(v)?v&&v.match(c):a;if(k&&w){var b=m.substr(0,m.length-k[0].length),x=v.substr(0,v.length-w[0].length);b==x&&(s=!a,m=u(k[0]),v=u(w[0]))}}r=m===i||v===i?0:v>m?-1:m>v?1:0}}e(f,function(t){var e=t.sort;e&&(r=e(o,s,m,v,r))}),r*=o.sortReturnNumber,0===r&&p++}return 0===r&&(r=t.pos>n.pos?1:-1),r}function w(){var t=M.length===T.length;if(L&&t)F?M.forEach(function(t,e){t.elm.style.order=e}):A?A.appendChild(b()):console.warn("parentNode has been removed");else{var e=j[0],n=e.place,r="org"===n,i="start"===n,a="end"===n,o="first"===n,c="last"===n;if(r)M.forEach(x),M.forEach(function(t,e){_(S[e],t.elm)});else if(i||a){var s=S[i?0:S.length-1],u=s.elm.parentNode,l=i?u.firstChild:u.lastChild;l!==s.elm&&(s={elm:l}),x(s),a&&u.appendChild(s.ghost),_(s,b())}else if(o||c){var h=S[o?0:S.length-1];_(x(h),b())}}}function b(){return M.forEach(function(t){E.appendChild(t.elm)}),E}function x(t){var e=t.elm,n=s.createElement("div");return t.ghost=n,e.parentNode.insertBefore(n,e),t}function _(t,e){var n=t.ghost,r=n.parentNode;r.insertBefore(e,n),r.removeChild(n),delete t.ghost}function C(t,e){var n,r=t.elm;return e.selector&&(e.hasFilter?r.matchesSelector(e.selector)||(r=o):r=r.querySelector(e.selector)),e.hasAttr?n=r.getAttribute(e.attr):e.useVal?n=r.value||r.getAttribute("value"):e.hasData?n=r.getAttribute("data-"+e.data):r&&(n=r.textContent),$(n)&&(e.cases||(n=n.toLowerCase()),n=n.replace(/\s+/g," ")),n}function $(t){return"string"==typeof t}$(t)&&(t=s.querySelectorAll(t)),0===t.length&&console.warn("No elements to sort");var S,A,E=s.createDocumentFragment(),T=[],M=[],O=[],j=[],L=!0,F=t.length&&(r===i||r.useFlex!==!1)&&-1!==getComputedStyle(t[0].parentNode,null).display.indexOf("flex");return c.apply(o,Array.prototype.slice.call(arguments,1)),g(),y(),w(),M.map(function(t){return t.elm})}function e(t,e){for(var n,r=t.length,i=r;i--;)n=r-i-1,e(t[n],n)}function n(t,e,n){for(var r in e)(n||t[r]===i)&&(t[r]=e[r]);return t}function r(t,e,n){f.push({prepare:t,sort:e,sortBy:n})}var i,a=!1,o=null,c=window,s=c.document,u=parseFloat,l=/(-?\d+\.?\d*)\s*$/g,h=/(\d+\.?\d*)\s*$/g,f=[],d=0,p=0,m={selector:o,order:"asc",attr:o,data:o,useVal:a,place:"org",returns:a,cases:a,forceStrings:a,ignoreDashes:a,sortFunction:o,useFlex:a,emptyEnd:a};return c.Element&&function(t){t.matchesSelector=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(t){for(var e=this,n=(e.parentNode||e.document).querySelectorAll(t),r=-1;n[++r]&&n[r]!=e;);return!!n[r]}}(Element.prototype),n(r,{loop:e}),n(t,{plugin:r,defaults:m})}()),function(){function t(t){function e(e,n,r,i,a,o){for(;a>=0&&o>a;a+=t){var c=i?i[a]:a;r=n(r,e[c],c,e)}return r}return function(n,r,i,a){r=k(r,a,4);var o=!S(n)&&y.keys(n),c=(o||n).length,s=t>0?0:c-1;return arguments.length<3&&(i=n[o?o[s]:s],s+=t),e(n,r,i,o,s,c)}}function e(t){return function(e,n,r){n=w(n,r);for(var i=$(e),a=t>0?0:i-1;a>=0&&i>a;a+=t)if(n(e[a],a,e))return a;return-1}}function n(t,e,n){return function(r,i,a){var o=0,c=$(r);if("number"==typeof a)t>0?o=a>=0?a:Math.max(a+c,o):c=a>=0?Math.min(a+1,c):a+c+1;else if(n&&a&&c)return a=n(r,i),r[a]===i?a:-1;if(i!==i)return a=e(l.call(r,o,c),y.isNaN),a>=0?a+o:-1;for(a=t>0?o:c-1;a>=0&&c>a;a+=t)if(r[a]===i)return a;return-1}}function r(t,e){var n=O.length,r=t.constructor,i=y.isFunction(r)&&r.prototype||c,a="constructor";for(y.has(t,a)&&!y.contains(e,a)&&e.push(a);n--;)a=O[n],a in t&&t[a]!==i[a]&&!y.contains(e,a)&&e.push(a)}var i=this,a=i._,o=Array.prototype,c=Object.prototype,s=Function.prototype,u=o.push,l=o.slice,h=c.toString,f=c.hasOwnProperty,d=Array.isArray,p=Object.keys,m=s.bind,v=Object.create,g=function(){},y=function(t){return t instanceof y?t:this instanceof y?void(this._wrapped=t):new y(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):i._=y,y.VERSION="1.8.3";var k=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,a){return t.call(e,n,r,i,a)}}return function(){return t.apply(e,arguments)}},w=function(t,e,n){return null==t?y.identity:y.isFunction(t)?k(t,e,n):y.isObject(t)?y.matcher(t):y.property(t)};y.iteratee=function(t,e){return w(t,e,1/0)};var b=function(t,e){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var a=arguments[i],o=t(a),c=o.length,s=0;c>s;s++){var u=o[s];e&&void 0!==n[u]||(n[u]=a[u])}return n}},x=function(t){if(!y.isObject(t))return{};if(v)return v(t);g.prototype=t;var e=new g;return g.prototype=null,e},_=function(t){return function(e){return null==e?void 0:e[t]}},C=Math.pow(2,53)-1,$=_("length"),S=function(t){var e=$(t);return"number"==typeof e&&e>=0&&C>=e};y.each=y.forEach=function(t,e,n){e=k(e,n);var r,i;if(S(t))for(r=0,i=t.length;i>r;r++)e(t[r],r,t);else{var a=y.keys(t);for(r=0,i=a.length;i>r;r++)e(t[a[r]],a[r],t)}return t},y.map=y.collect=function(t,e,n){e=w(e,n);for(var r=!S(t)&&y.keys(t),i=(r||t).length,a=Array(i),o=0;i>o;o++){var c=r?r[o]:o;a[o]=e(t[c],c,t)}return a},y.reduce=y.foldl=y.inject=t(1),y.reduceRight=y.foldr=t(-1),y.find=y.detect=function(t,e,n){var r;return r=S(t)?y.findIndex(t,e,n):y.findKey(t,e,n),void 0!==r&&-1!==r?t[r]:void 0},y.filter=y.select=function(t,e,n){var r=[];return e=w(e,n),y.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},y.reject=function(t,e,n){return y.filter(t,y.negate(w(e)),n)},y.every=y.all=function(t,e,n){e=w(e,n);for(var r=!S(t)&&y.keys(t),i=(r||t).length,a=0;i>a;a++){var o=r?r[a]:a;if(!e(t[o],o,t))return!1}return!0},y.some=y.any=function(t,e,n){e=w(e,n);for(var r=!S(t)&&y.keys(t),i=(r||t).length,a=0;i>a;a++){var o=r?r[a]:a;if(e(t[o],o,t))return!0}return!1},y.contains=y.includes=y.include=function(t,e,n,r){return S(t)||(t=y.values(t)),("number"!=typeof n||r)&&(n=0),y.indexOf(t,e,n)>=0},y.invoke=function(t,e){var n=l.call(arguments,2),r=y.isFunction(e);return y.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},y.pluck=function(t,e){return y.map(t,y.property(e))},y.where=function(t,e){return y.filter(t,y.matcher(e))},y.findWhere=function(t,e){return y.find(t,y.matcher(e))},y.max=function(t,e,n){var r,i,a=-1/0,o=-1/0;if(null==e&&null!=t){t=S(t)?t:y.values(t);for(var c=0,s=t.length;s>c;c++)r=t[c],r>a&&(a=r)}else e=w(e,n),y.each(t,function(t,n,r){i=e(t,n,r),(i>o||i===-1/0&&a===-1/0)&&(a=t,o=i)});return a},y.min=function(t,e,n){var r,i,a=1/0,o=1/0;if(null==e&&null!=t){t=S(t)?t:y.values(t);for(var c=0,s=t.length;s>c;c++)r=t[c],a>r&&(a=r)}else e=w(e,n),y.each(t,function(t,n,r){i=e(t,n,r),(o>i||1/0===i&&1/0===a)&&(a=t,o=i)});return a},y.shuffle=function(t){for(var e,n=S(t)?t:y.values(t),r=n.length,i=Array(r),a=0;r>a;a++)e=y.random(0,a),e!==a&&(i[a]=i[e]),i[e]=n[a];return i},y.sample=function(t,e,n){return null==e||n?(S(t)||(t=y.values(t)),t[y.random(t.length-1)]):y.shuffle(t).slice(0,Math.max(0,e))},y.sortBy=function(t,e,n){return e=w(e,n),y.pluck(y.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var A=function(t){return function(e,n,r){var i={};return n=w(n,r),y.each(e,function(r,a){var o=n(r,a,e);t(i,r,o)}),i}};y.groupBy=A(function(t,e,n){y.has(t,n)?t[n].push(e):t[n]=[e]}),y.indexBy=A(function(t,e,n){t[n]=e}),y.countBy=A(function(t,e,n){y.has(t,n)?t[n]++:t[n]=1}),y.toArray=function(t){return t?y.isArray(t)?l.call(t):S(t)?y.map(t,y.identity):y.values(t):[]},y.size=function(t){return null==t?0:S(t)?t.length:y.keys(t).length},y.partition=function(t,e,n){e=w(e,n);var r=[],i=[];return y.each(t,function(t,n,a){(e(t,n,a)?r:i).push(t)}),[r,i]},y.first=y.head=y.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:y.initial(t,t.length-e)},y.initial=function(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},y.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:y.rest(t,Math.max(0,t.length-e))},y.rest=y.tail=y.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},y.compact=function(t){return y.filter(t,y.identity)};var E=function(t,e,n,r){for(var i=[],a=0,o=r||0,c=$(t);c>o;o++){var s=t[o];if(S(s)&&(y.isArray(s)||y.isArguments(s))){e||(s=E(s,e,n));var u=0,l=s.length;for(i.length+=l;l>u;)i[a++]=s[u++]}else n||(i[a++]=s)}return i};y.flatten=function(t,e){return E(t,e,!1)},y.without=function(t){return y.difference(t,l.call(arguments,1))},y.uniq=y.unique=function(t,e,n,r){y.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=w(n,r));for(var i=[],a=[],o=0,c=$(t);c>o;o++){var s=t[o],u=n?n(s,o,t):s;e?(o&&a===u||i.push(s),a=u):n?y.contains(a,u)||(a.push(u),i.push(s)):y.contains(i,s)||i.push(s)}return i},y.union=function(){return y.uniq(E(arguments,!0,!0))},y.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=$(t);i>r;r++){var a=t[r];if(!y.contains(e,a)){for(var o=1;n>o&&y.contains(arguments[o],a);o++);o===n&&e.push(a)}}return e},y.difference=function(t){var e=E(arguments,!0,!0,1);return y.filter(t,function(t){return!y.contains(e,t)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(t){for(var e=t&&y.max(t,$).length||0,n=Array(e),r=0;e>r;r++)n[r]=y.pluck(t,r);return n},y.object=function(t,e){for(var n={},r=0,i=$(t);i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},y.findIndex=e(1),y.findLastIndex=e(-1),y.sortedIndex=function(t,e,n,r){n=w(n,r,1);for(var i=n(e),a=0,o=$(t);o>a;){var c=Math.floor((a+o)/2);n(t[c])<i?a=c+1:o=c}return a},y.indexOf=n(1,y.findIndex,y.sortedIndex),y.lastIndexOf=n(-1,y.findLastIndex),y.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),a=0;r>a;a++,t+=n)i[a]=t;return i};var T=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var a=x(t.prototype),o=t.apply(a,i);return y.isObject(o)?o:a};y.bind=function(t,e){if(m&&t.bind===m)return m.apply(t,l.call(arguments,1));if(!y.isFunction(t))throw new TypeError("Bind must be called on a function");var n=l.call(arguments,2),r=function(){return T(t,r,e,this,n.concat(l.call(arguments)))};return r},y.partial=function(t){var e=l.call(arguments,1),n=function(){for(var r=0,i=e.length,a=Array(i),o=0;i>o;o++)a[o]=e[o]===y?arguments[r++]:e[o];for(;r<arguments.length;)a.push(arguments[r++]);return T(t,n,this,this,a)};return n},y.bindAll=function(t){var e,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(e=1;r>e;e++)n=arguments[e],t[n]=y.bind(t[n],t);return t},y.memoize=function(t,e){var n=function(r){var i=n.cache,a=""+(e?e.apply(this,arguments):r);return y.has(i,a)||(i[a]=t.apply(this,arguments)),i[a]};return n.cache={},n},y.delay=function(t,e){var n=l.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},y.defer=y.partial(y.delay,y,1),y.throttle=function(t,e,n){var r,i,a,o=null,c=0;n||(n={});var s=function(){c=n.leading===!1?0:y.now(),o=null,a=t.apply(r,i),o||(r=i=null)};return function(){var u=y.now();c||n.leading!==!1||(c=u);var l=e-(u-c);return r=this,i=arguments,0>=l||l>e?(o&&(clearTimeout(o),o=null),c=u,a=t.apply(r,i),o||(r=i=null)):o||n.trailing===!1||(o=setTimeout(s,l)),a}},y.debounce=function(t,e,n){var r,i,a,o,c,s=function(){var u=y.now()-o;e>u&&u>=0?r=setTimeout(s,e-u):(r=null,n||(c=t.apply(a,i),r||(a=i=null)))};return function(){a=this,i=arguments,o=y.now();var u=n&&!r;return r||(r=setTimeout(s,e)),u&&(c=t.apply(a,i),a=i=null),c}},y.wrap=function(t,e){return y.partial(e,t)},y.negate=function(t){return function(){return!t.apply(this,arguments)}},y.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},y.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},y.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},y.once=y.partial(y.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(t){if(!y.isObject(t))return[];if(p)return p(t);var e=[];for(var n in t)y.has(t,n)&&e.push(n);return M&&r(t,e),e},y.allKeys=function(t){if(!y.isObject(t))return[];var e=[];for(var n in t)e.push(n);return M&&r(t,e),e},y.values=function(t){for(var e=y.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},y.mapObject=function(t,e,n){e=w(e,n);for(var r,i=y.keys(t),a=i.length,o={},c=0;a>c;c++)r=i[c],o[r]=e(t[r],r,t);return o},y.pairs=function(t){for(var e=y.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},y.invert=function(t){for(var e={},n=y.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},y.functions=y.methods=function(t){var e=[];for(var n in t)y.isFunction(t[n])&&e.push(n);return e.sort()},y.extend=b(y.allKeys),y.extendOwn=y.assign=b(y.keys),y.findKey=function(t,e,n){e=w(e,n);for(var r,i=y.keys(t),a=0,o=i.length;o>a;a++)if(r=i[a],e(t[r],r,t))return r},y.pick=function(t,e,n){var r,i,a={},o=t;if(null==o)return a;y.isFunction(e)?(i=y.allKeys(o),r=k(e,n)):(i=E(arguments,!1,!1,1),r=function(t,e,n){return e in n},o=Object(o));for(var c=0,s=i.length;s>c;c++){var u=i[c],l=o[u];r(l,u,o)&&(a[u]=l)}return a},y.omit=function(t,e,n){if(y.isFunction(e))e=y.negate(e);else{var r=y.map(E(arguments,!1,!1,1),String);e=function(t,e){return!y.contains(r,e)}}return y.pick(t,e,n)},y.defaults=b(y.allKeys,!0),y.create=function(t,e){var n=x(t);return e&&y.extendOwn(n,e),n},y.clone=function(t){return y.isObject(t)?y.isArray(t)?t.slice():y.extend({},t):t},y.tap=function(t,e){return e(t),t},y.isMatch=function(t,e){var n=y.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),a=0;r>a;a++){var o=n[a];if(e[o]!==i[o]||!(o in i))return!1}return!0};var j=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof y&&(t=t._wrapped),e instanceof y&&(e=e._wrapped);var i=h.call(t);if(i!==h.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var a="[object Array]"===i;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,c=e.constructor;if(o!==c&&!(y.isFunction(o)&&o instanceof o&&y.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var s=n.length;s--;)if(n[s]===t)return r[s]===e;if(n.push(t),r.push(e),a){if(s=t.length,s!==e.length)return!1;for(;s--;)if(!j(t[s],e[s],n,r))return!1}else{var u,l=y.keys(t);if(s=l.length,y.keys(e).length!==s)return!1;for(;s--;)if(u=l[s],!y.has(e,u)||!j(t[u],e[u],n,r))return!1}return n.pop(),r.pop(),!0};y.isEqual=function(t,e){return j(t,e)},y.isEmpty=function(t){return null==t?!0:S(t)&&(y.isArray(t)||y.isString(t)||y.isArguments(t))?0===t.length:0===y.keys(t).length},y.isElement=function(t){return!(!t||1!==t.nodeType)},y.isArray=d||function(t){return"[object Array]"===h.call(t)},y.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){y["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),y.isArguments(arguments)||(y.isArguments=function(t){return y.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(t){return"function"==typeof t||!1}),y.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},y.isNaN=function(t){return y.isNumber(t)&&t!==+t},y.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===h.call(t)},y.isNull=function(t){return null===t},y.isUndefined=function(t){return void 0===t},y.has=function(t,e){return null!=t&&f.call(t,e)},y.noConflict=function(){return i._=a,this},y.identity=function(t){return t},y.constant=function(t){return function(){return t}},y.noop=function(){},y.property=_,y.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},y.matcher=y.matches=function(t){return t=y.extendOwn({},t),function(e){return y.isMatch(e,t)}},y.times=function(t,e,n){var r=Array(Math.max(0,t));e=k(e,n,1);for(var i=0;t>i;i++)r[i]=e(i);return r},y.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},y.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},F=y.invert(L),I=function(t){var e=function(e){return t[e]},n="(?:"+y.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};y.escape=I(L),y.unescape=I(F),y.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),y.isFunction(r)?r.call(t):r};var U=0;y.uniqueId=function(t){var e=++U+"";return t?t+e:e},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\u2028|\u2029/g,B=function(t){return"\\"+D[t]};y.template=function(t,e,n){!e&&n&&(e=n),e=y.defaults({},e,y.templateSettings);var r=RegExp([(e.escape||N).source,(e.interpolate||N).source,(e.evaluate||N).source].join("|")+"|$","g"),i=0,a="__p+='";t.replace(r,function(e,n,r,o,c){return a+=t.slice(i,c).replace(P,B),i=c+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(e.variable||"obj","_",a)}catch(c){throw c.source=a,c}var s=function(t){return o.call(this,t,y)},u=e.variable||"obj";return s.source="function("+u+"){\n"+a+"}",s},y.chain=function(t){var e=y(t);return e._chain=!0,e};var R=function(t,e){return t._chain?y(e).chain():e};y.mixin=function(t){y.each(y.functions(t),function(e){var n=y[e]=t[e];y.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),R(this,n.apply(y,t))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];y.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],R(this,n)}}),y.each(["concat","join","slice"],function(t){var e=o[t];y.prototype[t]=function(){return R(this,e.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}.call(this),function(){"use strict";function t(e,r){function i(t,e){return function(){return t.apply(e,arguments)}}var a;if(r=r||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=r.touchBoundary||10,this.layer=e,this.tapDelay=r.tapDelay||200,this.tapTimeout=r.tapTimeout||700,!t.notNeeded(e)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],c=this,s=0,u=o.length;u>s;s++)c[o[s]]=i(c[o[s]],c);n&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var i=Node.prototype.removeEventListener;"click"===t?i.call(e,t,n.hijacked||n,r):i.call(e,t,n,r)},e.addEventListener=function(t,n,r){var i=Node.prototype.addEventListener;"click"===t?i.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),r):i.call(e,t,n,r)}),"function"==typeof e.onclick&&(a=e.onclick,e.addEventListener("click",function(t){a(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!e,r=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,i=r&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a=r&&/OS [6-7]_\d/.test(navigator.userAgent),o=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(r&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,r;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),r=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return n&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;r&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,a;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],r){if(a=window.getSelection(),a.rangeCount&&!a.isCollapsed)return!0;if(!i){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,o,c,s,u,l=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,o=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,a&&(u=t.changedTouches[0],l=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),c=l.tagName.toLowerCase(),"label"===c){if(e=this.findControl(l)){if(this.focus(l),n)return!1;l=e}}else if(this.needsFocus(l))return t.timeStamp-o>100||r&&window.top!==window&&"input"===c?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,t),r&&"select"===c||(this.targetElement=null,t.preventDefault()),!1);return r&&!i&&(s=l.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(l)||(t.preventDefault(),this.sendClick(l,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;n&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,r,i,a;if("undefined"==typeof window.ontouchstart)return!0;if(r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(r>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(o&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(a=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],a>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction?!0:!1)},t.attach=function(e,n){return new t(e,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}(),function(){var t=window.navigator.userAgent.toLowerCase(),e={isQQBrowser:/qqbrowser/.test(t),isWeixin:/micromessenger/.test(t)||/weixin/.test(t),isAndroid:/android/.test(t),isIOS:/iphone/.test(t)||/ipad/.test(t)||/itouch/.test(t)||/ipod/.test(t),isFirefox:/firefox/.test(t),isIpad:/ipad/.test(t),isImgotv:/imgo/.test(t)};window.UA=e}(),function(){var t={setCookie:function(t,e,n){var r=n||30,i=new Date;i.setTime(i.getTime()+24*r*60*60*1e3),document.cookie=t+"="+escape(e)+"; expires="+i.toGMTString()},getCookie:function(t){var e,n=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(n))?unescape(e[2]):null},clearCookie:function(){var t=document.cookie.match(/[^ =;]+(?=\=)/g);if(t)for(var e=t.length;e--;)document.cookie=t[e]+"=0;expires="+new Date(0).toUTCString()},parseQuery:function(t){var t=t?t:location.search,e=new Object;if(-1!=t.indexOf("?"))for(var n=t.substr(1),r=n.split("&"),i=0;i<r.length;i++)try{e[r[i].split("=")[0]]=decodeURI(r[i].split("=")[1])}catch(a){e[r[i].split("=")[0]]=unescape(r[i].split("=")[1])}return e},rnd:function(t,e){return Math.floor((e-t)*Math.random()+t)},toParam:function(t){var e=[];for(var n in t)e.push(n+"="+t[n]);return e.join("&")},showToast:function(t,e){$(".mg-toast").show();var n=$(".mg-toast p");n.removeClass("s h").html(t).show(),setTimeout(function(){n.addClass("s")},1),n.on("webkitTransitionEnd",function(){setTimeout(function(){n.addClass("h")},1500)}),setTimeout(function(){$(".mg-toast").hide(),"function"==typeof e&&e()},3e3)},getByteLength:function(t){return(t+"").replace(/[^\x00-\xff]/g,"mm").length},showLoading:function(){$(".mg-loading").show()},hideLoading:function(){$(".mg-loading").hide()},downloadApp:function(){var t={android:"http://www.hunantv.com/v/m/v/2015/mandroid/",weixin:"http://a.app.qq.com/o/simple.jsp?pkgname=com.hunantv.imgo.activity",ios:"https://itunes.apple.com/cn/app/id629774477?pt=355474&ct=mgtv&mt=8"};UA.isWeixin?window.location.href=t.weixin:window.location.href=UA.isIOS?t.ios:t.android},checkAppVersion:function(){var t=window.navigator.userAgent.toLowerCase();if(UA.isIOS){var e=t.split("imgotv-iphone/"),n=e[1].split(".");if(""+n[0]+n[1]+n[2]>453)return!0}if(UA.isAndroid){var e=t.split("imgotv-aphone/"),n=e[1].split(".");if(""+n[0]+n[1]+n[2]>451)return!0}},wxReady:function(){wx.onMenuShareAppMessage({title:ShareData.title,desc:ShareData.desc,link:ShareData.link,imgUrl:ShareData.imgUrl,type:ShareData.type,success:function(){}}),wx.onMenuShareTimeline({title:ShareData.title2,link:ShareData.link,imgUrl:ShareData.imgUrl,type:ShareData.type,success:function(){}})},wxShare:function(){var e=location.href.split("#")[0];e=escape(e);var n="http://v.api.hunantv.com/weixin/sign?url="+e+"&callback=?";$.getJSON(n,function(t){var e=t.data;wx.config({appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]})}),wx.ready(function(){t.wxReady()})},parseUrl:function(){var t=window.navigator.userAgent.toLowerCase();-1!=t.indexOf("imgo")&&$("a").each(function(t,e){var n=$(e).attr("href");if(-1!=n.indexOf("hunantv.com")){var r=n.match(/\/\w{1}\/\d{1}\/\d{1,}\/\w{1}\/(.*)\.html/i);if(!r)return;$(e).attr("href","imgotv://player?videoId="+r[1])}})},jumpPage:function(t){ImgotvApi.jumpPage({url:t})}};window.Utils=t}(),function(){var t={url:"http://singer.api.hunantv.com",get:function(t,e,n){$.ajax({url:t,data:e,dataType:"jsonp",success:function(e){console.log(t,e),(200==e.code||200==e.err_code||400==e.code||403==e.code||"ok"==e.status)&&n(e)}.bind(this),error:function(t,e,n){Utils.showToast("网络异常，请刷新重试！")},timeout:5e3})},get2:function(t,e,n,r){$.ajax({url:t,data:e,dataType:"jsonp",success:function(e){console.log(t,e),"function"==typeof n&&n(e)}.bind(this),error:function(e,n,i){Utils.showToast("网络异常，请刷新重试！"),console.log(t),"function"==typeof r&&r()},timeout:5e3})},getTermList:function(t,e){this.get(this.url+"/term/list",t,e)},getTermLike:function(t,e){this.get(this.url+"/term/like",t,e)},getTermUnlike:function(t,e){this.get(this.url+"/term/unlike",t,e)}};window.Api=t}(),document.addEventListener("DOMContentLoaded",function(){FastClick.attach(document.body)},!1),function(){const t="singer4act_",e="投票成功，谢谢你的参与",n="你已经投过啦，下次再来哈";var r=!1,i=!1,a=$(window).height(),o=0,c="",s="",u=[],l={init:function(){if(UA.isAndroid){var t=Utils.getCookie("AndroidReload");
null==t&&(Utils.setCookie("AndroidReload","true",1/24/60),window.location.reload())}if(UA.isImgotv&&!Utils.checkAppVersion())return void(window.location.href="http://www.hunantv.com/v/m/v/2015/mupdate/?from=wsgstg");var e=Utils.parseQuery();e&&(r="1"===e.h),r||(o=$(window).width()/16*9,a-=o,$(".app-nav ul li.quit").hide());ImgotvApi.getDeviceInfo(function(t){t&&(c=JSON.parse(t))}),ImgotvApi.getUserInfo(function(t){t&&(s=JSON.parse(t))}),this.getTermList(),this.bindEvents()},goAlert:function(t){var e=this;clearTimeout(e.alertTimeout),$(".mg-toast p").html(t),$(".mg-toast").fadeIn(),e.alertTimeout=setTimeout("$('.mg-toast').fadeOut();",2e3)},goCheckLogin:function(){var t=this;return s?!0:(r?ImgotvApi.login(function(t){window.location.reload()}):t.goAlert("请先登录芒果TV客户端"),!1)},getVideo:function(){Api.get("http://m.api.hunantv.com/video/getbyid/",{videoId:PDATA.person_info.vid},function(t){var e=t.data,n=!!document.createElement("video").canPlayType("application/x-mpegURL"),r=n?e.m3u8Url[1]?e.m3u8Url[1]:e.m3u8Url[0]:e.mp4Url[1]?e.mp4Url[1]:e.mp4Url[0];Api.get(r,{},function(t){var n='<video id="mgo-player" preload="auto" controls="controls" width="100%" height="100%" poster="'+e.detail.image+'" src="'+t.info+'" webkit-playsinline></video>';$(".video").html(n)})})},bindEvents:function(){$(".vote-nav img").on("click",function(t){$(".page-vote").hide()}),$(".app-nav ul li.quit").on("click",function(t){ImgotvApi.closeWebView()}),$(".mg-share").on("click",function(){$(".mg-share").hide()}),$(".main-content-share img").on("click",function(t){r?ImgotvApi.showShareMenus({title:ShareData.title,shareUrl:ShareData.link,shareIcon:ShareData.imgUrl}):$(".mg-share").show()})},getTermList:function(){var t=this;Api.getTermList({ticket:s.ticket,uuid:s.uuid},function(e){u=e.data.list,console.log(e.data.list),t.appRender(),t.appBind()})},appRender:function(){setTimeout("$('.page-loading').fadeOut('fast');",2e3),$(".app-nav .title").html(CustomData.titleApp),$(".page-app").height(a).css("margin-top",o+"px"),$(".page-vote").height(a).css("margin-top",o+"px"),$(".main-menu").height(a-$(".nav").height());for(var e=0;e<u.length;e++)$(".main-menu ul").append("<li><h1>"+(e+1)+"</h1><h2>期</h2></li>");$(".main-menu ul li:last-child").addClass("active"),$(".main-menu").scrollTop($(".main-menu").height()),$(".main-content").width($(window).width()-$(".main-menu").width()),$(".main-content").height(a-$(".nav").height());for(var e=0;e<u.length;e++){var n="",r=u[e],i=10;if(0==r[0].is_end){for(var c=0;c<r.length;c++)parseFloat(r[c].like_star_number)>i&&(i=parseFloat(r[c].like_star_number)+1);n="<li><h1>"+CustomData.titleLastPage+'</h1><div class="content-list1 clearfix" style="height:'+($(".main-content").height()-80)+'px;"><ul>';for(var c=0;c<r.length;c++)n+='<li class="content-voteli clearfix" data-sortvalue="'+r[c].like_star_number+'" data-index="'+e+'" data-index2="'+c+'" data-max="'+i+'">',n+='<img class="avatar" src="'+r[c].pc_avatar_key+'">',n+="<h1>"+r[c].name+"</h1>",n+='<h2><span class="content-check" id="check_'+r[c].term_id+'"></span>'+r[c].like_star_number+"</h2>",n+='<h3><div class="barbg"></div>',n+='<div class="barshow" style="width:'+Math.floor(parseFloat(r[c].like_star_number)/i*80)+'%"></div></h3>',n+="</li>";n+="</ul></div></li>"}else{for(var c=0;c<r.length;c++)parseFloat(r[c].like_music_number)>i&&(i=parseFloat(r[c].like_music_number)+1);n='<li class="content-term content-term-'+e+'"><h2 class="active" data-index="'+e+'">网友人气榜</h2><h3 data-index="'+e+'">本轮竞演排名</h3>',n+='<div class="content-list1 clearfix" style="height:'+($(".main-content").height()-80)+'px;"><ul>';for(var c=0;c<r.length;c++)n+='<li class="content-voteli clearfix" data-sortvalue="'+r[c].like_music_number+'" data-index="'+e+'" data-index2="'+c+'" data-max="'+i+'">',n+='<img class="avatar" src="'+r[c].pc_avatar_key+'">',n+="<h1>"+r[c].name+'<img class="icon"  src="http://i5.hunantv.com/s1/2014/m/u/108/images/icon_song.png">'+r[c].music+"</h1>",n+='<h2><span class="content-check" id="check_'+r[c].term_id+'"></span>'+r[c].like_music_number+"</h2>",n+='<h3><div class="barbg"></div><div class="barshow" style="width:'+Math.floor(parseFloat(r[c].like_music_number)/i*80)+'%"></div></h3>',n+="</li>";n+="</ul></div>",n+='<div class="content-list2 clearfix" style="height:'+($(".main-content").height()-80)+'px;display:none;"><ul>';for(var c=0;c<r.length;c++)n+='<li class="-cancel-content-voteli clearfix" data-rank="'+r[c].rank+'">',n+='<div data-rank="'+r[c].rank+'"><img class="avatar" src="'+r[c].pc_avatar_key+'"></div>',n+="<h1>"+r[c].name+"</h1>",n+="</li>";n+="</ul></div>",n+="</li>"}$(".main-content>ul").append(n),tinysort.defaults.attr="data-rank",tinysort(".main-content>ul li:nth-child("+(e+1)+") .content-list2 ul li"),7==r.length&&$(".main-content>ul li:nth-child("+(e+1)+") .content-list2 ul li:nth-child(5)").addClass("cols3offset");var s=Utils.getCookie(t+r[0].id);$("#check_"+s).removeClass("content-check").addClass("content-check-active")}$(".main-content>ul>li:last-child").show(),$(".vote-main").height(a-$(".nav").height())},appBind:function(){var t=this;$(".main-menu ul li").on("click","",function(){var t=$(this).index();$(".main-menu ul li").removeClass("active"),$(".main-menu ul li:nth-child("+(t+1)+")").addClass("active"),$(".main-content>ul>li").hide(),$(".main-content>ul>li:nth-child("+(t+1)+")").show()}),$(".main-content li").on("click",".content-voteli",function(){var e=$(this).data("index"),n=$(this).data("index2"),r=$(this).data("max"),i=u[e][n];t.showVotePage(i,r)}),$(".content-term").on("click","h2",function(){var t=$(this).data("index");$(".content-term-"+t+" h2").addClass("active"),$(".content-term-"+t+" h3").removeClass("active"),$(".content-term-"+t+" .content-list1").show(),$(".content-term-"+t+" .content-list2").hide()}),$(".content-term").on("click","h3",function(){var t=$(this).data("index");$(".content-term-"+t+" h3").addClass("active"),$(".content-term-"+t+" h2").removeClass("active"),$(".content-term-"+t+" .content-list2").show(),$(".content-term-"+t+" .content-list1").hide()})},showVotePage:function(r,a){var o=this,c=function(){var t=$(".avatarline").width();$(".avatarbox").height($(".avatarbox").width()),$(".avatarline").height($(".avatarline").width()),$(".avatarbox .avatar").width(t-20).css("top","-"+$(".avatarline").width()+"px"),$(".avatarline").html('<canvas id="avatarCanvas" width="'+$(".avatarline").width()+'px" height="'+$(".avatarline").width()+'px"></canvas>')},u=function(){var t=document.getElementById("avatarCanvas"),e=$(".avatarline").width(),n=t.getContext("2d");n.clearRect(0,0,e,e)},l=function(t,e,n,r){var i=document.getElementById("avatarCanvas"),a=$(".avatarline").width(),o=i.getContext("2d");o.beginPath(),o.strokeStyle=t;var c={x:a/2,y:a/2,r:(a-e)/2};-1==n?o.arc(c.x,c.y,c.r,0,2*Math.PI,!1):o.arc(c.x,c.y,c.r,1.5*Math.PI,0+Math.PI*(n/r),!1),o.stroke()},h=function(t,e,n){var r=0,i=setInterval(function(){t(),r++,n&&r>=n&&clearInterval(i)},e)};if(0==r.is_end){var f="";f+="<h1>"+r.name+"</h1>",f+='<div class="avatarbox clearfix">',f+='<div class="avatarline">',f+="</div>",f+='<img class="avatar" src="'+r.pc_avatar_key+'">',f+="</div>",f+='<h2><img class="icon"  src="http://i5.hunantv.com/s1/2014/m/u/108/images/icon_uncheck.png"><span>'+r.like_star_number+"</span></h2>",f+='<h3><div><img class="btnvote1" src="http://i5.hunantv.com/s1/2014/m/u/108/images/btn_vote1.png"></div><div><img class="btnvote2" src="http://i5.hunantv.com/s1/2014/m/u/108/images/btn_vote2.png"></div></h3>',f+='<div class="vote-main-ok clearfix hide">',f+='<img src="http://i5.hunantv.com/s1/2014/m/u/108/images/img_ad1.jpg">',f+='<div class="txt">',f+="感谢您的参与！竞猜成功将有机会获得<br>韩束墨菊特润咕噜水新品一份！",f+="</div>",f+='<div class="btn">',f+="返回",f+="</div>",f+="</div>",$(".vote-main").html(f),$(".page-vote").show(),c(),$(".btnvote1").on("click","",function(){var e=function(){Api.getTermLike({term_id:r.term_id,ticket:s.ticket,uuid:s.uuid},function(e){400==e.code?o.goAlert(n):($(".vote-main h2 span").html(parseFloat($(".vote-main h2 span").html())+1),Utils.setCookie(t+r.id,r.term_id,1/24),$("#check_"+r.term_id).removeClass("content-check").addClass("content-check-active"),$(".vote-main-ok").removeClass("hide"))})},a=function(){var e=Utils.getCookie(t+r.id);null==e?($(".vote-main h2 span").html(parseFloat($(".vote-main h2 span").html())+1),Utils.setCookie(t+r.id,r.term_id,1/24),$("#check_"+r.term_id).removeClass("content-check").addClass("content-check-active"),$(".vote-main-ok").removeClass("hide")):o.goAlert(n)};$(this).addClass("active"),s?e():i?o.goCheckLogin()&&e():a()}),$(".btnvote2").on("click","",function(){$(".page-vote").hide()}),$(".btn").on("click","",function(){$(".page-vote").hide()})}else{var f="";f+="<h1>"+r.name+"</h1>",f+='<h2><img class="icon"  src="http://i5.hunantv.com/s1/2014/m/u/108/images/icon_song.png">'+r.music+"</h2>",f+='<div class="avatarbox clearfix">',f+='<div class="avatarline">',f+="</div>",f+='<img class="avatar" src="'+r.pc_avatar_key+'">',f+="</div>",f+='<h4><div><img class="btnvote1" src="http://i5.hunantv.com/s1/2014/m/u/108/images/btn_vote1.png"><span>'+r.like_music_number+'</span></div><div><img class="btnvote3" src="http://i5.hunantv.com/s1/2014/m/u/108/images/btn_vote3.png"><span>'+r.unlike_music_number+"</span></div></h4>",$(".vote-main").html(f),$(".page-vote").show(),c(),l("#dddddd",4,-1,a),l("#dddddd",12,-1,a);var d=0,p=0;h(function(){u(),l("#eeeeee",4,-1,a),l("#eeeeee",12,-1,a),l("#f55252",12,d,a),d+=r.like_music_number/10,l("#35dcd6",4,p,a),p+=r.unlike_music_number/10},100,10),$(".btnvote1").on("click","",function(){var a=function(){Api.getTermLike({term_id:r.term_id,ticket:s.ticket,uuid:s.uuid},function(i){400==i.code?o.goAlert(n):($(".vote-main h4 div:first-child span").html(parseFloat($(".vote-main h4 div:first-child span").html())+1),Utils.setCookie(t+r.id,r.term_id,1/24),$("#check_"+r.term_id).removeClass("content-check").addClass("content-check-active"),o.goAlert(e))})},c=function(){var i=Utils.getCookie(t+r.id);null==i?($(".vote-main h4 div:first-child span").html(parseFloat($(".vote-main h4 div:first-child span").html())+1),Utils.setCookie(t+r.id,r.term_id,1/24),$("#check_"+r.term_id).removeClass("content-check").addClass("content-check-active"),o.goAlert(e)):o.goAlert(n)};$(this).addClass("active"),s?a():i?o.goCheckLogin()&&a():c()}),$(".btnvote3").on("click","",function(){var a=function(){Api.getTermUnlike({term_id:r.term_id,ticket:s.ticket,uuid:s.uuid},function(i){400==i.code?o.goAlert(n):(Utils.setCookie(t+r.id,r.term_id+1e5,1/24),o.goAlert(e))})},c=function(){var i=Utils.getCookie(t+r.id);null==i?(Utils.setCookie(t+r.id,r.term_id+1e5,1/24),o.goAlert(e)):o.goAlert(n)};$(this).addClass("active"),s?a():i?o.goCheckLogin()&&a():c()})}},end:function(){}};l.init()}();